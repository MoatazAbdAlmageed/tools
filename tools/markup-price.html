<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø­Ø§Ø³Ø¨Ø© Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù</title>
<link rel="stylesheet" href="../theme.css">
<style>
.slider-wrap {
  margin: 6px 0 18px;
}
.slider-row {
  display: flex;
  align-items: center;
  gap: 12px;
}
input[type=range] {
  flex: 1;
  -webkit-appearance: none;
  height: 6px;
  background: var(--border);
  border-radius: 30px;
  outline: none;
}
input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 20px; height: 20px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  cursor: pointer;
  box-shadow: 0 0 10px rgba(245,166,35,0.5);
}
.range-val {
  background: var(--card);
  border: 1px solid var(--accent);
  border-radius: 8px;
  padding: 4px 12px;
  color: var(--accent);
  font-weight: 900;
  font-size: 1.05rem;
  min-width: 56px;
  text-align: center;
}

.price-breakdown {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 20px;
}

.breakdown-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 18px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
}
.br-label { color: var(--muted); font-size: 0.85rem; font-weight: 600; }
.br-value { font-size: 1.25rem; font-weight: 900; }

.big-sell {
  text-align: center;
  padding: 28px;
  background: linear-gradient(135deg, rgba(245,166,35,0.08), rgba(232,114,42,0.08));
  border: 2px solid var(--accent);
  border-radius: var(--radius);
  margin-top: 20px;
}
.big-sell .bs-label { color: var(--muted); font-size: 0.88rem; margin-bottom: 8px; }
.big-sell .bs-value { font-size: 3.2rem; font-weight: 900; color: var(--accent); line-height: 1; }
.big-sell .bs-sub { color: var(--muted); font-size: 0.82rem; margin-top: 10px; }

.suggestions {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-top: 12px;
}
.sug-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 10px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
}
.sug-card:hover { border-color: var(--accent); }
.sug-pct { font-size: 0.75rem; color: var(--muted); font-weight: 700; }
.sug-price { font-size: 1.1rem; font-weight: 900; color: var(--text); }
.sug-profit { font-size: 0.72rem; color: var(--success); }
</style>
</head>
<body>
<div class="wrapper">
  <a href="../index.html" class="back-btn">â† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>

  <div class="page-header">
    <span class="page-icon">ğŸ¯</span>
    <div class="page-title">Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù</div>
    <div class="page-desc">Ø­Ø¯Ø¯ Ù‡Ø§Ù…Ø´ Ø±Ø¨Ø­Ùƒ ÙˆØ³ÙŠØ­Ø³Ø¨ Ù„Ùƒ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</div>
  </div>

  <div class="card">
    <div class="input-group">
      <label>Ø³Ø¹Ø± Ø§Ù„ØªÙƒÙ„ÙØ©</label>
      <input type="number" id="cost" placeholder="0" min="0" step="any" oninput="calc()">
    </div>

    <div class="input-group">
      <label>Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ %</label>
      <div class="slider-wrap">
        <div class="slider-row">
          <input type="range" id="marginSlider" min="1" max="200" value="20"
            oninput="syncSlider(this.value); calc()">
          <div class="range-val" id="sliderDisplay">20%</div>
        </div>
      </div>
      <input type="number" id="marginInput" placeholder="20" min="0" step="any"
        oninput="syncInput(this.value); calc()" style="margin-top:0">
    </div>

    <div class="big-sell" id="bigSell">
      <div class="bs-label">Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ù…Ù‚ØªØ±Ø­</div>
      <div class="bs-value" id="sellPrice">â€”</div>
      <div class="bs-sub" id="profitSub"></div>
    </div>

    <div class="price-breakdown" id="breakdown" style="display:none">
      <div class="breakdown-row">
        <div class="br-label">Ø§Ù„ØªÙƒÙ„ÙØ©</div>
        <div class="br-value" id="bCost">â€”</div>
      </div>
      <div class="breakdown-row">
        <div class="br-label">Ø§Ù„Ø±Ø¨Ø­ (Ù‡Ø§Ù…Ø´)</div>
        <div class="br-value" style="color:var(--success)" id="bProfit">â€”</div>
      </div>
      <div class="breakdown-row">
        <div class="br-label">Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø¨Ø­ Ù…Ù† Ø§Ù„Ø¨ÙŠØ¹</div>
        <div class="br-value" style="color:var(--accent3)" id="bMarginOnSell">â€”</div>
      </div>
    </div>

    <div class="divider">Ù…Ù‚ØªØ±Ø­Ø§Øª Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­</div>
    <div class="suggestions" id="suggestions"></div>

    <div class="btn-row">
      <button class="btn btn-secondary" onclick="clearAll()">ğŸ—‘ï¸ Ù…Ø³Ø­</button>
      <button class="btn btn-primary" onclick="copyResult()">ğŸ“‹ Ù†Ø³Ø®</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
function r(v, d=2) { return Math.round(v * Math.pow(10,d)) / Math.pow(10,d); }

function syncSlider(v) {
  document.getElementById('marginInput').value = v;
  document.getElementById('sliderDisplay').textContent = v + '%';
}
function syncInput(v) {
  const clamped = Math.max(1, Math.min(200, parseFloat(v)||1));
  document.getElementById('marginSlider').value = clamped;
  document.getElementById('sliderDisplay').textContent = clamped + '%';
}

function calc() {
  const cost   = parseFloat(document.getElementById('cost').value);
  const margin = parseFloat(document.getElementById('marginInput').value) || 20;

  buildSuggestions(isNaN(cost) ? 0 : cost);

  if (isNaN(cost) || cost <= 0) {
    document.getElementById('sellPrice').textContent = 'â€”';
    document.getElementById('profitSub').textContent = '';
    document.getElementById('breakdown').style.display = 'none';
    return;
  }

  // sell = cost * (1 + margin/100) â€” markup on cost
  const sell   = r(cost * (1 + margin / 100));
  const profit = r(sell - cost);
  const marginOnSell = r((profit / sell) * 100);

  document.getElementById('sellPrice').textContent = sell;
  document.getElementById('profitSub').textContent = `Ø±Ø¨Ø­ ${profit} | Ù‡Ø§Ù…Ø´ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ¹ ${marginOnSell}%`;
  document.getElementById('breakdown').style.display = 'flex';
  document.getElementById('bCost').textContent = cost;
  document.getElementById('bProfit').textContent = `+${profit}`;
  document.getElementById('bMarginOnSell').textContent = marginOnSell + '%';
}

function buildSuggestions(cost) {
  const percs = [10, 15, 20, 25, 30, 50];
  document.getElementById('suggestions').innerHTML = percs.map(p => {
    const sell = cost > 0 ? r(cost * (1 + p/100)) : 'â€”';
    const profit = cost > 0 ? r(cost * p / 100) : 'â€”';
    return `<div class="sug-card" onclick="setMargin(${p})">
      <div class="sug-pct">${p}% Ø±Ø¨Ø­</div>
      <div class="sug-price">${sell}</div>
      <div class="sug-profit">+${profit}</div>
    </div>`;
  }).join('');
}

function setMargin(v) {
  document.getElementById('marginInput').value = v;
  syncInput(v);
  calc();
}

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg; t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

function copyResult() {
  const sell = document.getElementById('sellPrice').textContent;
  if (sell === 'â€”') return;
  navigator.clipboard.writeText(sell);
  showToast('âœ… ØªÙ… Ù†Ø³Ø® Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹');
}

function clearAll() {
  document.getElementById('cost').value = '';
  document.getElementById('marginInput').value = '20';
  syncInput(20);
  calc();
}

buildSuggestions(0);
</script>
</body>
</html>
